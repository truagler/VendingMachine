{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vopro\\\\RiderProjects\\\\Machine\\\\Machine\\\\ClientApp\\\\src\\\\components\\\\Home.tsx\";\nimport * as React from 'react';\nimport { Component } from 'react';\nimport { Mapper } from \"../Mapper/Mapper\";\nimport { ProductCategory } from \"../Enum/ProductCategory\";\nimport { CoinCategory } from \"../Enum/CoinCategory\";\nimport { Language } from \"../Language/Language\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.openProductModal = () => {\n      this.setState({\n        showModalProduct: true\n      });\n    };\n\n    this.openCoinModal = () => {\n      this.setState({\n        showModalCoin: true\n      });\n    };\n\n    this.closeProductModal = () => {\n      this.setState({\n        showModalProduct: false\n      });\n    };\n\n    this.closeCoinModal = () => {\n      this.setState({\n        showModalCoin: false\n      });\n    };\n\n    this.state = {\n      products: [],\n      product: {\n        id: 0,\n        name: \"\",\n        countProduct: 0,\n        price: 0,\n        description: \"\",\n        category: ProductCategory.food,\n        isRemoved: false\n      },\n      coins: [],\n      coin: {\n        id: 0,\n        coinCategory: CoinCategory.one,\n        maxCoinCount: 0,\n        nowCoinCount: 0\n      },\n      orders: [],\n      ids: [],\n      showModalProduct: false,\n      showModalCoin: false\n    };\n  }\n\n  componentDidMount() {\n    this.getProducts();\n    this.getCoins();\n    this.getOrderHistory();\n  }\n\n  async getProducts() {\n    const response = await fetch('getproducts');\n    const request = await response.json();\n    const products = Mapper.mapToProductViews(request);\n    this.setState({\n      products: products\n    });\n  }\n\n  async getProductsRemoved() {\n    const response = await fetch('getproductsremoved');\n    const request = await response.json();\n    const products = Mapper.mapToProductViews(request);\n    this.setState({\n      products: products\n    });\n  }\n\n  async getProductsNotRemoved() {\n    const response = await fetch('getproductsnotremoved');\n    const request = await response.json();\n    const products = Mapper.mapToProductViews(request);\n    this.setState({\n      products: products\n    });\n  }\n\n  async getProductByCategory(category) {\n    const response = await fetch('getproductscategory?category=' + category.toString());\n    const request = await response.json();\n    const products = Mapper.mapToProductViews(request);\n    this.setState({\n      products: products\n    });\n  }\n\n  async getCoins() {\n    const response = await fetch('getcoins');\n    const request = await response.json();\n    const coins = Mapper.mapToCoinViews(request);\n    this.setState({\n      coins: coins\n    });\n  }\n\n  async getOrderHistory() {\n    const response = await fetch('getorderhistory');\n    const request = await response.json();\n    const orders = Mapper.mapToOrderViews(request);\n    this.setState({\n      orders: orders\n    });\n  }\n\n  async removeProduct(productId) {\n    await fetch('removeproduct', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: JSON.stringify(productId)\n    });\n    await this.getProducts();\n  }\n\n  async removeProducts(productIds) {\n    if (this.state.ids.length == 0) return alert(\"Вы не выбрали ни одной операции\");\n    await fetch('updatecoinnow', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: JSON.stringify(productIds)\n    });\n    await this.getProducts();\n  }\n\n  async getProduct(id) {\n    const response = await fetch('getproduct?id=' + id.toString());\n    const request = await response.json();\n    const product = Mapper.mapToProductView(request);\n    this.setState({\n      product: product\n    });\n  }\n\n  updateIds(e) {\n    const checked = e.target.checked;\n    const id = Number(e.target.value);\n\n    if (!this.state.ids.includes(id) && checked) {\n      this.state.ids.push(id);\n    }\n\n    if (this.state.ids.includes(id) && !checked) {\n      let index = this.state.ids.indexOf(id);\n      this.state.ids.splice(index, 1);\n    }\n  }\n\n  getProductName(productId) {\n    var _this$state$products$;\n\n    return (_this$state$products$ = this.state.products.find(product => product.id == productId)) === null || _this$state$products$ === void 0 ? void 0 : _this$state$products$.name;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u041F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u041F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table table-striped\",\n        \"aria-labelledby\": \"tabelLabel\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0430 \\u0432 \\u043C\\u0430\\u0448\\u0438\\u043D\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0421\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-danger\",\n                children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.products.map(product => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: product.countProduct\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [\"P\", product.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: product.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: Language.toProductCategory(product.category)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: e => this.updateIds(e),\n                value: product.id,\n                type: \"checkbox\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 12\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => this.removeProduct(product.id),\n                className: \"btn btn-danger\",\n                children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 12\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 8\n            }, this)]\n          }, product.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 7\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u041C\\u043E\\u043D\\u0435\\u0442\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table table-striped\",\n        \"aria-labelledby\": \"tabelLabel\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0426\\u0435\\u043D\\u043D\\u043E\\u0441\\u0442\\u044C \\u043C\\u043E\\u043D\\u0435\\u0442\\u044B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043C\\u043E\\u043D\\u0435\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043C\\u043E\\u043D\\u0435\\u0442 \\u043D\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0439 \\u043C\\u043E\\u043C\\u0435\\u043D\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.coins.map(coin => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: Language.toCoinCategory(coin.coinCategory)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: coin.maxCoinCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: coin.nowCoinCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 8\n            }, this)]\n          }, coin.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 7\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F \\u043F\\u043E\\u043A\\u0443\\u043F\\u043E\\u043A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table table-striped\",\n        \"aria-labelledby\": \"tabelLabel\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0430\\u0442\\u0430 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041A\\u0443\\u043F\\u043B\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0442\\u043E\\u0432\\u0430\\u0440/\\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442/\\u043D\\u0430\\u043F\\u0438\\u0442\\u043E\\u043A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.orders.map(order => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: order.createdDateTime.toString().slice(0, 10)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: this.getProductName(order.productId)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 8\n            }, this)]\n          }, order.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 7\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/vopro/RiderProjects/Machine/Machine/ClientApp/src/components/Home.tsx"],"names":["React","Component","Mapper","ProductCategory","CoinCategory","Language","Home","constructor","props","openProductModal","setState","showModalProduct","openCoinModal","showModalCoin","closeProductModal","closeCoinModal","state","products","product","id","name","countProduct","price","description","category","food","isRemoved","coins","coin","coinCategory","one","maxCoinCount","nowCoinCount","orders","ids","componentDidMount","getProducts","getCoins","getOrderHistory","response","fetch","request","json","mapToProductViews","getProductsRemoved","getProductsNotRemoved","getProductByCategory","toString","mapToCoinViews","mapToOrderViews","removeProduct","productId","method","headers","body","JSON","stringify","removeProducts","productIds","length","alert","getProduct","mapToProductView","updateIds","e","checked","target","Number","value","includes","push","index","indexOf","splice","getProductName","find","render","map","toProductCategory","toCoinCategory","order","createdDateTime","slice"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport {ChangeEvent, Component} from 'react';\r\nimport {Mapper} from \"../Mapper/Mapper\";\r\nimport {ProductCategory} from \"../Enum/ProductCategory\";\r\nimport {ProductView} from \"../ViewModel/productView\";\r\nimport {CoinView} from \"../ViewModel/coinView\";\r\nimport {OrderView} from \"../ViewModel/orderView\";\r\nimport {CoinCategory} from \"../Enum/CoinCategory\";\r\nimport {Language} from \"../Language/Language\";\r\n\r\ntype Props = {}\r\n\r\ntype State = {\r\n\tproducts: ProductView[];\r\n\tproduct: ProductView;\r\n\tcoins: CoinView[];\r\n\tcoin: CoinView;\r\n\torders: OrderView[];\r\n\tids: number[];\r\n\tshowModalProduct: boolean;\r\n\tshowModalCoin: boolean;\r\n}\r\n\r\nexport class Home extends Component<Props, State> {\r\n\tconstructor(props: Props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tproducts: [],\r\n\t\t\tproduct: {\r\n\t\t\t\tid: 0,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tcountProduct: 0,\r\n\t\t\t\tprice: 0,\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tcategory: ProductCategory.food,\r\n\t\t\t\tisRemoved: false\r\n\t\t\t}, \r\n\t\t\tcoins:[],\r\n\t\t\tcoin: {\r\n\t\t\t\tid: 0,\r\n\t\t\t\tcoinCategory: CoinCategory.one,\r\n\t\t\t\tmaxCoinCount: 0,\r\n\t\t\t\tnowCoinCount: 0\r\n\t\t\t}, \r\n\t\t\torders:[],\r\n\t\t\tids: [],\r\n\t\t\tshowModalProduct: false,\r\n\t\t\tshowModalCoin: false\r\n\t\t}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tthis.getProducts();\r\n\t\tthis.getCoins();\r\n\t\tthis.getOrderHistory();\r\n\t}\r\n\r\n\tasync getProducts(){\r\n\t\tconst response = await fetch('getproducts');\r\n\t\tconst request = await response.json();\r\n\t\tconst products = Mapper.mapToProductViews(request)\r\n\t\tthis.setState({products: products})\r\n\t}\r\n\t\r\n\tasync getProductsRemoved(){\r\n\t\tconst response = await fetch('getproductsremoved');\r\n\t\tconst request = await response.json();\r\n\t\tconst products = Mapper.mapToProductViews(request)\r\n\t\tthis.setState({products: products})\r\n\t}\r\n\r\n\tasync getProductsNotRemoved(){\r\n\t\tconst response = await fetch('getproductsnotremoved');\r\n\t\tconst request = await response.json();\r\n\t\tconst products = Mapper.mapToProductViews(request)\r\n\t\tthis.setState({products: products})\r\n\t}\r\n\r\n\tasync getProductByCategory(category: ProductCategory){\r\n\t\tconst response = await fetch('getproductscategory?category='+ category.toString());\r\n\t\tconst request = await response.json();\r\n\t\tconst products = Mapper.mapToProductViews(request)\r\n\t\tthis.setState({products: products})\r\n\t}\r\n\r\n\tasync getCoins(){\r\n\t\tconst response = await fetch('getcoins');\r\n\t\tconst request = await response.json();\r\n\t\tconst coins = Mapper.mapToCoinViews(request)\r\n\t\tthis.setState({coins: coins})\r\n\t}\r\n\r\n\tasync getOrderHistory(){\r\n\t\tconst response = await fetch('getorderhistory');\r\n\t\tconst request = await response.json();\r\n\t\tconst orders = Mapper.mapToOrderViews(request)\r\n\t\tthis.setState({orders: orders})\r\n\t}\r\n\r\n\tasync removeProduct(productId: number){\r\n\t\tawait fetch('removeproduct', {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json;charset=utf-8'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify(productId)\r\n\t\t});\r\n\t\tawait this.getProducts();\r\n\t}\r\n\r\n\tasync removeProducts(productIds: number[]){\r\n\t\tif(this.state.ids.length == 0) return alert(\"Вы не выбрали ни одной операции\");\r\n\t\tawait fetch('updatecoinnow', {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json;charset=utf-8'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify(productIds)\r\n\t\t});\r\n\t\tawait this.getProducts();\r\n\t}\r\n\r\n\tasync getProduct(id: number){\r\n\t\tconst response = await fetch('getproduct?id='+ id.toString());\r\n\t\tconst request = await response.json();\r\n\t\tconst product = Mapper.mapToProductView(request)\r\n\t\tthis.setState({product: product})\r\n\t}\r\n\t\r\n\tupdateIds(e:ChangeEvent<HTMLInputElement>) {\r\n\t\tconst checked = e.target.checked;\r\n\t\tconst id = Number(e.target.value);\r\n\t\tif(!this.state.ids.includes(id) && checked){\r\n\t\t\tthis.state.ids.push(id);\r\n\t\t}\r\n\t\tif(this.state.ids.includes(id) && !checked){\r\n\t\t\tlet index = this.state.ids.indexOf(id);\r\n\t\t\tthis.state.ids.splice(index, 1)\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetProductName(productId: number){\r\n\t\treturn this.state.products.find(product => product.id == productId)?.name;\r\n\t}\r\n\t\r\n\topenProductModal = () =>{\r\n\t\tthis.setState({  showModalProduct: true });\r\n\t}\r\n\topenCoinModal = () =>{\r\n\t\tthis.setState({  showModalCoin: true });\r\n\t}\r\n\r\n\tcloseProductModal = () =>{\r\n\t\tthis.setState({  showModalProduct: false });\r\n\t}\r\n\r\n\tcloseCoinModal = () =>{\r\n\t\tthis.setState({  showModalCoin: false });\r\n\t}\r\n\t\r\n  render () {\r\n    return (\r\n      <div>\r\n          <h1>Панель администратора</h1>\r\n\t\t  <br/>\r\n\t\t  <h2>Продукты</h2>\r\n\t\t  <table className='table table-striped' aria-labelledby=\"tabelLabel\">\r\n\t\t\t  <thead>\r\n\t\t\t  <tr>\r\n\t\t\t\t  <th>Наименование продукта</th>\r\n\t\t\t\t  <th>Количество продукта в машине</th>\r\n\t\t\t\t  <th>Стоимость продукта</th>\r\n\t\t\t\t  <th>Описание</th>\r\n\t\t\t\t  <th>Категория продукта</th>\r\n\t\t\t\t  <th><button className=\"btn btn-danger\">Удалить</button></th>\r\n\t\t\t\t  <th><button className=\"btn btn-success\">Добавить новый продукт</button></th>\r\n\t\t\t\t  <th></th>\r\n\t\t\t  </tr>\r\n\t\t\t  </thead>\r\n\t\t\t  <tbody>\r\n\t\t\t  {this.state.products.map(product =>\r\n\t\t\t\t  <tr key={product.id}>\r\n\t\t\t\t\t  <td>{product.name}</td>\r\n\t\t\t\t\t  <td>{product.countProduct}</td>\r\n\t\t\t\t\t  <td>P{product.price}</td>\r\n\t\t\t\t\t  <td>{product.description}</td>\r\n\t\t\t\t\t  <td>{Language.toProductCategory(product.category)}</td>\r\n\t\t\t\t\t  <td><input onChange={(e) => this.updateIds(e)} value={product.id} type=\"checkbox\"/></td>\r\n\t\t\t\t\t  <td></td>\r\n\t\t\t\t\t  <td><button onClick={() => this.removeProduct(product.id)} className=\"btn btn-danger\">Удалить</button></td>\r\n\t\t\t\t  </tr>\r\n\t\t\t  )}\r\n\t\t\t  </tbody>\r\n\t\t  </table>\r\n\t\t  <br/>\r\n\t\t  <h2>Монеты</h2>\r\n\t\t  <table className='table table-striped' aria-labelledby=\"tabelLabel\">\r\n\t\t\t  <thead>\r\n\t\t\t  <tr>\r\n\t\t\t\t  <th>Ценность монеты</th>\r\n\t\t\t\t  <th>Максимальное количество монет</th>\r\n\t\t\t\t  <th>Количество монет на данный момент</th>\r\n\t\t\t  </tr>\r\n\t\t\t  </thead>\r\n\t\t\t  <tbody>\r\n\t\t\t  {this.state.coins.map(coin =>\r\n\t\t\t\t  <tr key={coin.id}>\r\n\t\t\t\t\t  <td>{Language.toCoinCategory(coin.coinCategory)}</td>\r\n\t\t\t\t\t  <td>{coin.maxCoinCount}</td>\r\n\t\t\t\t\t  <td>{coin.nowCoinCount}</td>\r\n\t\t\t\t  </tr>\r\n\t\t\t  )}\r\n\t\t\t  </tbody>\r\n\t\t  </table>\r\n\t\t  <br/>\r\n\t\t  <h2>История покупок</h2>\r\n\t\t  <table className='table table-striped' aria-labelledby=\"tabelLabel\">\r\n\t\t\t  <thead>\r\n\t\t\t  <tr>\r\n\t\t\t\t  <th>Дата покупки</th>\r\n\t\t\t\t  <th>Купленный товар/продукт/напиток</th>\r\n\t\t\t  </tr>\r\n\t\t\t  </thead>\r\n\t\t\t  <tbody>\r\n\t\t\t  {this.state.orders.map(order =>\r\n\t\t\t\t  <tr key={order.id}>\r\n\t\t\t\t\t  <td>{order.createdDateTime.toString().slice(0,10)}</td>\r\n\t\t\t\t\t  <td>{this.getProductName(order.productId)}</td>\r\n\t\t\t\t  </tr>\r\n\t\t\t  )}\r\n\t\t\t  </tbody>\r\n\t\t  </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}